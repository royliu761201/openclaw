#!/usr/bin/env node
import { createRequire } from 'module';
import { fileURLToPath } from 'url';
import { dirname } from 'path';

const require = createRequire(import.meta.url);
const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

try {
  const { spawnSync } = require('child_process');
  const path = require('path');
  
  const scriptPath = path.resolve(__dirname, '..', 'browser-cli.ts');
  const tsxPath = path.resolve(__dirname, '..', 'node_modules', '.bin', 'tsx.cmd'); // Windows specific
  
  const cmd = process.platform === 'win32' ? tsxPath : 'tsx';
  
  const result = spawnSync(cmd, [scriptPath, ...process.argv.slice(2)], { 
    stdio: 'inherit',
    shell: true
  });
  
  process.exit(result.status ?? 0);
  
} catch (e) {
  console.error(e);
  process.exit(1);
}
